webpackJsonp([0],{335:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){console.log("App has started");var e={apiKey:"8578cf6cf7104f77a2b30b8259c14ea6",baseUrl:"https://newsapi.org/v2",sources:["abc-news","bbc-news","cnn","fox-news","the-new-york-times"]},t=new u.default(e),n=new d.default,r=new y.default,i=new a.default,o=new w.default;new h.default(r,o,n),new l.default(e,t,i,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(339),a=r(o),s=n(341),u=r(s),c=n(343),l=r(c),f=n(344),h=r(f),p=n(345),d=r(p),b=n(346),w=r(b),v=n(347),y=r(v);n(349)},336:function(e,t){e.exports='<article class="news-article">\r\n    <header>\r\n        <h1 class="news-title"></h1>\r\n    </header>\r\n    <section class="news-content">\r\n        <img class="news-image">\r\n        <p class="news-description"></p>\r\n        <a target="_blank" class="news-url">Read more</a>\r\n    </section>\r\n    <footer>\r\n        Published on\r\n        <time class="news-publish-date"></time>\r\n        by <span class="news-author"></span>.\r\n    </footer>\r\n</article>'},337:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.observers=[]};i.prototype.subscribe=function(e){var t=this;return this.observers.push(e),function(){return t.unsubscribe(e)}},i.prototype.unsubscribe=function(e){this.observers=this.observers.filter(function(t){return t!==e})},i.prototype.broadcast=function(e){this.observers.forEach(function(t){return t(e)})},t.default=i},338:function(e,t,n){"use strict";function r(e){e.setElementValue=i.setElementValue,e.setElementAttribute=i.setElementAttribute}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(340)},339:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(336),u=r(s),c=n(337),l=r(c),f=n(338),h=r(f),p=(0,h.default)(o=function(){function e(){var t=this;i(this,e),console.log("Initialize DOM elements..."),this._sourceSelectControl=document.querySelector("#newsSources"),this._newsContainerElement=document.querySelector("#news-container"),this._pageInputControl=document.querySelector("#page-control"),this._sourceChangeObservable=new l.default,this._pageChangeObservable=new l.default,this._sourceSelectControl.addEventListener("change",function(e){return t._sourceChangeObservable.broadcast(e.target.value)}),this._pageInputControl.addEventListener("change",function(e){return t._pageChangeObservable.broadcast(e.target.value)})}return a(e,[{key:"onSourceChange",value:function(e){this._sourceChangeObservable.subscribe(e)}},{key:"onPageChange",value:function(e){this._pageChangeObservable.subscribe(e)}},{key:"addSources",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=document.createElement("option");s.text=a,this._sourceSelectControl.add(s)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"buildArticle",value:function(t){var n=new Date(t.publishedAt),r=new DOMParser,i=r.parseFromString(u.default,"text/html").querySelector(".news-article");e.setElementValue(i,".news-title",t.title),e.setElementValue(i,".news-description",t.description),e.setElementValue(i,".news-author",t.author),e.setElementValue(i,".news-publish-date",n.toLocaleDateString()),e.setElementAttribute(i,"img","src",t.urlToImage),e.setElementAttribute(i,".news-url","href",t.url),e.setElementAttribute(i,".news-publish-date","datetime",t.publishedAt),this._newsContainerElement.appendChild(i)}},{key:"buildArticles",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.buildArticle(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"clearNews",value:function(){this._newsContainerElement.innerHTML=""}},{key:"printError",value:function(e){var t=this,n=document.createElement("p");n.classList.add("error"),n.innerHTML="Something went wrong. "+e+".",this._newsContainerElement.appendChild(n),setTimeout(function(){return t._newsContainerElement.removeChild(n)},1e4)}},{key:"Page",get:function(){return this._pageInputControl.value},set:function(e){Number.isInteger(e)&&(this._pageInputControl.value=e)}},{key:"CurrentSource",get:function(){return this._sourceSelectControl.value}}]),e}())||o;t.default=p},340:function(e,t,n){"use strict";function r(e,t,n){e.querySelector(t).innerHTML=n}function i(e,t,n,r){if(null!=r){e.querySelector(t).setAttribute(n,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.setElementValue=r,t.setElementAttribute=i},341:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(342),c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cache={},n.cacheRequrestCountLimit=5,n}return o(t,e),a(t,[{key:"getNews",value:function(e,n){var r=this;return this.checkIfCacheExpired(),1!==n&&this.cache.source===e&&this.cache.page===n?(this.cache.useCount++,Promise.resolve(this.cache.data)):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getNews",this).call(this,e,n).then(function(t){return 1===n||r.cache.source||(r.cache.source=e,r.cache.page=n,r.cache.data=t,r.cache.useCount=0),t})}},{key:"checkIfCacheExpired",value:function(){void 0===this.cache.useCount||this.cache.useCount<this.cacheRequrestCountLimit||(this.cache={})}}]),t}(u.NewsService);t.default=c},342:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=t.apiKey,i=t.baseUrl;r(this,e),this._apiKey=n,this._baseUrl=i}return i(e,[{key:"getNews",value:function(t,n){var r=this._baseUrl+"/everything?sources="+t+"&page="+n,i=new Request(r,{headers:new Headers({"X-Api-Key":this._apiKey})});return fetch(i).then(e.handleErrors).then(function(e){return e.json()})}}],[{key:"handleErrors",value:function(e){if(console.log("checking http response status..."),!e.ok)throw Error(e.statusText);return e}}]),e}();t.NewsService=o},343:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i,o){r(this,e),this.newsService=n,this.newsView=i,this.articleList=o,this.newsView.addSources(t.sources),this.newsView.Page=1,this.subscribeForViewEvents(),this.uploadNews(t.sources[0])}return i(e,[{key:"uploadNews",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;console.log("Upload news form News API"),this.newsService.getNews(e,n).then(function(e){var n=e.articles;t.articleList.setArticles(n)}).catch(function(e){console.error("Oops. Error")})}},{key:"subscribeForViewEvents",value:function(){var e=this;console.log("Subscribe for events from View"),this.newsView.onSourceChange(function(t){e.newsView.Page=1,e.uploadNews(t)}),this.newsView.onPageChange(function(t){t<=0||e.uploadNews(e.newsView.CurrentSource,t)})}}]),e}();t.default=o},344:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i){var o=this;r(this,e),this._newsContainerElement=document.querySelector("#news-container"),this._articleFactory=t,this._articleListView=n,i.onArticleListChange(function(e){return o.buildArticles(e)})}return i(e,[{key:"buildArticle",value:function(e){var t=this._articleFactory.createArticleView(e);this._articleListView.addArticleView(t.view)}},{key:"buildArticles",value:function(e){this._articleListView.clearArticles();var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.buildArticle(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}}]),e}();t.default=o},345:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(337),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){r(this,e),this.data=[],this._dataChangedObservable=new a.default}return i(e,[{key:"setArticles",value:function(e){this.data=e,this._dataChangedObservable.broadcast(this.data)}},{key:"onArticleListChange",value:function(e){return this._dataChangedObservable.subscribe(e)}}]),e}();t.default=s},346:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this._newsContainerElement=document.querySelector("#news-container")}return i(e,[{key:"addArticleView",value:function(e){this._newsContainerElement.appendChild(e)}},{key:"clearArticles",value:function(){this._newsContainerElement.innerHTML=""}}]),e}();t.default=o},347:function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0});var i=n(348),o=function(e){return e&&e.__esModule?e:{default:e}}(i);r.prototype.createArticleView=function(e){var t=new o.default,n=new Date(e.publishedAt);return t.setTitle(e.title),t.setDescription(e.description),t.setImage(e.urlToImage),t.setAuthor(e.author),t.setPublishDate(n,n.toLocaleDateString()),t.setSource(e.url),t},t.default=r},348:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(336),u=r(s),c=n(338),l=r(c),f=(0,l.default)(o=function(){function e(){i(this,e),this.view=this.parseArticleTemplate(this.articleTemplate)}return a(e,[{key:"setTitle",value:function(t){e.setElementValue(this.view,this.articleElements.title,t)}},{key:"setImage",value:function(t){e.setElementAttribute(this.view,this.articleElements.image,"src",t)}},{key:"setDescription",value:function(t){e.setElementValue(this.view,this.articleElements.description,t)}},{key:"setAuthor",value:function(t){e.setElementValue(this.view,this.articleElements.author,t)}},{key:"setPublishDate",value:function(t,n){e.setElementValue(this.view,this.articleElements.publishDate,n),e.setElementAttribute(this.view,this.articleElements.publishDate,"datetime",t)}},{key:"setSource",value:function(t){e.setElementAttribute(this.view,this.articleElements.sourceUrl,"href",t)}}]),e}())||o;f.prototype.articleTemplate=u.default,f.prototype.parseArticleTemplate=function(e){return(new DOMParser).parseFromString(e,"text/html").querySelector(".news-article")},f.prototype.articleElements={title:".news-title",image:"img",description:".news-description",author:".news-author",publishDate:".news-publish-date",sourceUrl:".news-url"},t.default=f},349:function(e,t,n){var r=n(350);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0};i.transform=void 0;n(125)(r,i);r.locals&&(e.exports=r.locals)},350:function(e,t,n){t=e.exports=n(124)(void 0),t.push([e.i,"body {\n  font-family: 'Roboto', sans-serif;\n  background-color: white; }\n\nmain {\n  margin: 5px 25px; }\n\n.copyright {\n  color: #fff; }\n\n#news-container {\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 30px; }\n\n.news-article {\n  width: 575px;\n  margin-right: auto;\n  margin-left: auto;\n  margin-bottom: 50px;\n  padding: 20px 25px;\n  font-size: 16px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\n  transition: 0.3s;\n  animation-name: news-article-added;\n  animation-duration: 0.7s; }\n  .news-article:hover {\n    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2); }\n  .news-article footer {\n    color: #737373; }\n\n.news-title {\n  font-size: 24px;\n  text-align: center;\n  font-weight: bold;\n  color: rgba(0, 0, 0, 0.77); }\n\n.news-image {\n  display: block;\n  width: 80%;\n  height: auto;\n  max-height: 300px;\n  margin: 20px auto;\n  border-radius: 5px; }\n\n.news-description {\n  margin-bottom: 5px; }\n\n.news-content {\n  margin-bottom: 20px; }\n\n.form-control:focus {\n  border-color: #ced4da;\n  box-shadow: initial; }\n\n.error {\n  color: red;\n  font-size: 16px; }\n\n@keyframes news-article-added {\n  from {\n    opacity: 0; }\n  to {\n    opacity: 1; } }\n\n@media screen and (max-width: 600px) {\n  main {\n    margin: 5px 10px; }\n  #news-container {\n    margin-top: 0; }\n  .news-article {\n    width: 98%;\n    margin-bottom: 15px;\n    padding: 10px 15px;\n    font-size: 18px;\n    border-radius: 2px; }\n  .news-image {\n    width: 95%;\n    height: auto;\n    margin: 10px auto;\n    border-radius: 2px; }\n  .news-title {\n    font-size: 26px; } }\n",""])}});